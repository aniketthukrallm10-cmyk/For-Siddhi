<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For Siddhi üíó</title>
  <meta name="description" content="A tiny birthday web app for Siddhi ‚Äî notes, memories, music, and confetti." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 32 32%22><text x=%2250%25%22 y=%2255%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-size=%2224%22>üíó</text></svg>">

  <style>
    :root{
      /* soft grey + pink palette */
      --bg1:#f8f9fb; 
      --bg2:#f2f2f7;
      --ink:#1f2328;
      --muted:#666a73;
      --card:#ffffffcc;
      --accent:#ff4d6d;  /* pink */
      --accent2:#ff8fab; /* lighter pink */
      --stroke:#e6e7eb;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
    }

    .wrap{max-width:980px; margin:0 auto; padding:20px 16px 64px}
    header{
      border-radius:24px; background:var(--card); padding:24px; backdrop-filter: blur(8px);
      box-shadow:0 10px 30px rgba(0,0,0,.07);
      display:grid; gap:14px; place-items:center; text-align:center;
      border:1px solid var(--stroke);
    }
    h1{font-size:clamp(28px,6vw,44px); margin:0}
    .sub{color:var(--muted)}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 14px; border-radius:999px; background:#fff; box-shadow:0 6px 18px rgba(0,0,0,.06); border:1px solid var(--stroke)}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:center}

    .grid{display:grid; gap:18px; margin-top:18px}
    @media (min-width:760px){ .grid{grid-template-columns:repeat(12,1fr)} }

    .card{
      grid-column:1/-1; border-radius:20px; background:var(--card); padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,.06); border:1px solid var(--stroke)
    }
    .card h2{margin:0 0 8px; font-size:clamp(20px,3.5vw,28px)}
    .lead{color:var(--muted); margin:6px 0 14px}
    .two{grid-column:1/-1}
    @media (min-width:760px){ .two{grid-column:span 6} }

    .btn{
      cursor:pointer; border:0; padding:12px 16px; border-radius:14px;
      background:var(--accent); color:white; font-weight:700;
      transition:transform .03s ease, box-shadow .2s, background .2s;
      box-shadow:0 8px 20px rgba(255,77,109,.35)
    }
    .btn:active{transform:translateY(1px)}
    .ghost{background:#fff; color:var(--accent); border:2px solid var(--accent)}
    .muted{background:#fff; color:#333; border:1px solid var(--stroke)}
    .small{font-size:13px; color:var(--muted)}

    .love{
      list-style:none; margin:12px 0 0; padding:0; display:grid; gap:12px;
      grid-template-columns:repeat(auto-fill,minmax(200px,1fr))
    }
    .love li{
      border:1px dashed #ffb3c1; background:#fff; border-radius:14px; padding:12px 12px;
      box-shadow:0 6px 16px rgba(0,0,0,.04)
    }

    .gallery{display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:10px}
    .gallery img{
      width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:14px;
      box-shadow:0 6px 14px rgba(0,0,0,.07); border:1px solid var(--stroke); background:#fff
    }

    input[type="text"], input[type="number"], input[type="date"], input[type="time"]{
      font-size:16px; padding:10px 12px; border-radius:10px; border:1px solid var(--stroke); outline:none; background:#fff
    }

    .bubble{padding:12px 14px; border-radius:12px; background:#fff; border:1.5px dashed #0001}
    .hidden{display:none}

    /* confetti canvas fills screen */
    #confetti{position:fixed; inset:0; pointer-events:none}
  </style>
</head>
<body>
<canvas id="confetti"></canvas>

<div class="wrap">
  <header>
    <div class="pill">üéÇ <span id="dateLabel">Today</span></div>
    <h1 id="hero">For <span id="herName">Siddhi</span> üíó</h1>
    <p class="sub" id="tagline">A tiny love app: a message, your 20 boxes, memories, and music.</p>
    <div class="row">
      <button class="btn" id="confettiBtn">Launch confetti üéâ</button>
      <button class="btn ghost" id="addHome">Add to Home Screen (iPhone)</button>
    </div>
  </header>

  <div class="grid">
    <!-- 20 things -->
    <section class="card two">
      <h2>20 things I adore about you üíå</h2>
      <p class="lead" id="customMsg">
        Hi Siddhi Jabulani (its a football go look it up)<br><br>
        HAPPY BIRTHDAY TO THE MOST GORGEOUS GIRL OF ALL TIME + SEXY (MGGGOAT+S). You're 20 now and here are 18+2=20 things I still like abut you.
      </p>
      <ul class="love" id="reasons"></ul>
      <div class="small">(Open each box with your eyes üëÄ‚Äîno spoilers!)</div>
    </section>

    <!-- Photos -->
    <section class="card two">
      <h2>Our memories üì∏</h2>
      <p class="lead">Tap a photo to see it bigger. If you‚Äôre hosting yourself, put images in <code>/public/img</code> and name them <code>s1.jpg..s10.jpg</code>.</p>
      <div class="gallery" id="gallery"></div>
      <div class="row" style="margin-top:10px">
        <button class="btn muted" id="openAlbumBtn">Open full album</button>
      </div>
      <p class="small">Google Drive album opens in a new tab. The gallery below uses local images if provided.</p>
    </section>

    <!-- Secret -->
    <section class="card two">
      <h2>A tiny surprise üéÅ</h2>
      <p class="lead">Unlock with your birth month + day (MMDD).</p>
      <div class="row">
        <input id="pin" inputmode="numeric" pattern="[0-9]*" placeholder="e.g., 1014" />
        <button class="btn" id="unlock">Unlock</button>
      </div>
      <div id="secret" class="bubble hidden" aria-live="polite"></div>
    </section>

    <!-- Music -->
    <section class="card two">
      <h2>Soundtrack üé∂</h2>
      <p class="lead">Tap once to start music (iPhone requires a tap).</p>
      <div id="player"></div>
      <div class="row" style="margin-top:10px">
        <button class="btn" id="startMusic">Start the music ‚ñ∂Ô∏è</button>
      </div>
      <p class="small">Uses your Spotify playlist. (Autoplay with sound is blocked on most browsers until you tap.)</p>
    </section>

    <!-- Share -->
    <section class="card two">
      <h2>Share this page üîó</h2>
      <p class="lead">Make it yours, then copy a clean link.</p>
      <button class="btn" id="copy">Copy link with your settings</button>
      <div id="shareUrl" class="small" style="word-break:break-all; margin-top:8px"></div>
    </section>
  </div>

  <footer class="small" style="text-align:center; margin-top:28px">
    Built with ‚ù§Ô∏è by <span id="byYou">Aniket</span>. Works on iPhone & Windows laptop.
  </footer>
</div>

<script>
  // ---------- Personalize via query params ----------
  const params    = new URLSearchParams(location.search);
  const herName   = params.get('name')     || 'Siddhi Saklani';
  const pinCode   = params.get('pin')      || '1410'; // MMDD
  const playlist  = params.get('playlist') || 'https://open.spotify.com/playlist/1PcjYxcikE7fCuWIvKDQcc?si=660791f494434079';
  const by        = params.get('by')       || 'Aniket';
  const folder    = params.get('folder')   || 'https://drive.google.com/drive/folders/1JAl8Et1s7xmwmJHikZxdsOjf1Ust2M7a?usp=sharing';
  document.getElementById('herName').textContent = herName;
  document.getElementById('byYou').textContent   = by;
  document.getElementById('dateLabel').textContent = new Date().toLocaleDateString();

  // ---------- 20 things (your exact lines) ----------
  const reasons = [
    'How pretty you are',
    'The fact that you feel like home.',
    'How dedicated you are to your goals.',
    'How you come to me for help and support when you need it üòÅ.',
    'How despite being ill treated by people, you\'re still a good person.',
    'How genuine you are.',
    'Your music taste. I know yeh contradictory hai but I feel like your taste is actually perfect to compliment mine.',
    'Your breasticles',
    'Your 2.5 hugs',
    'Your peck on the cheek',
    'The fact that you\'re exclusive about stuff.',
    'I like the fact that you stayed with me even though i was a jerk for so long.',
    'Your smile and laugh.',
    'The fact that you\'re so talented.',
    'Your handwriting.',
    'How you are with coco.',
    'Your creativity and ability to make gifts, its actually insane.',
    'How you act around me ü§£, its so cute sometimes.',
    'Your ability to always try and stay positive and happy (i know mere saath you show your vulnerable side also but still).',
    'The fact that you could be mine for potentially 49 more years.'
  ];
  const reasonsEl = document.getElementById('reasons');
  reasons.forEach(t => { const li=document.createElement('li'); li.textContent=t; reasonsEl.appendChild(li); });

  // ---------- Photos ----------
  // If you upload /public/img/s1.jpg..s10.jpg they will show.
  const defaultPics = Array.from({length:10}, (_,i)=>`/img/s${i+1}.jpg`);
  const picsParam   = params.get('pics');   // optional override: ?pics=url1|url2|...
  const pics        = picsParam ? picsParam.split('|') : defaultPics;

  const g = document.getElementById('gallery');
  pics.forEach(src => {
    const img = new Image();
    img.loading = 'lazy';
    img.src = src;
    img.alt = 'memory photo';
    img.onerror = () => { img.style.display='none'; }; // hide if missing
    img.onclick = () => window.open(src,'_blank');
    g.appendChild(img);
  });
  document.getElementById('openAlbumBtn').onclick = () => window.open(folder,'_blank');

  // ---------- Secret surprise ----------
  const secretMsg = params.get('msg') || `Happy birthday, ${herName}! Your gift is a date night that I‚Äôm planning end-to-end ‚Äî dress comfy, I‚Äôll text you details üòå`;
  document.getElementById('unlock').onclick = () => {
    const val = (document.getElementById('pin').value||'').trim();
    const box = document.getElementById('secret');
    if(val === pinCode){ box.textContent = secretMsg; box.classList.remove('hidden'); confettiBurst(200); }
    else { box.textContent = 'Almost! Try again üí°'; box.classList.remove('hidden'); }
  };

  // ---------- Music (tap-to-start for iOS) ----------
  const player = document.getElementById('player');
  function loadSpotify(){
    player.innerHTML='';
    if(playlist){
      const iframe = document.createElement('iframe');
      iframe.style.borderRadius='12px';
      iframe.width='100%'; iframe.height='352';
      iframe.allow='autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture';
      iframe.src = playlist.replace('open.spotify.com/','open.spotify.com/embed/');
      player.appendChild(iframe);
    } else {
      const p=document.createElement('p'); p.className='small'; p.textContent='Add your playlist with ?playlist=SPOTIFY_URL'; player.appendChild(p);
    }
  }
  document.getElementById('startMusic').onclick = loadSpotify;

  // ---------- Share link with current settings ----------
  document.getElementById('copy').onclick = ()=>{
    const url = new URL(location.href);
    url.search = '';
    const set = (k,v)=>{ if(v) url.searchParams.set(k,v) };
    set('name', herName); set('pin', pinCode); set('playlist', playlist); set('by', by); set('folder', folder);
    const out = url.toString();
    navigator.clipboard?.writeText(out);
    document.getElementById('shareUrl').textContent = out;
  };

  // ---------- Add to Home Screen helper ----------
  document.getElementById('addHome').onclick = ()=>{
    alert('On iPhone: ‚Ä¢ Tap the share icon ‚Ä¢ ‚ÄúAdd to Home Screen‚Äù.');
  };

  // ---------- Confetti ----------
  const cvs = document.getElementById('confetti');
  const ctx = cvs.getContext('2d');
  let W,H; let pieces=[]; const colors=['#ff4d6d','#f9c74f','#90be6d','#577590','#f8961e','#43aa8b'];
  function resize(){ W=cvs.width=innerWidth; H=cvs.height=innerHeight; }
  addEventListener('resize', resize); resize();
  function spawn(n){ for(let i=0;i<n;i++){ pieces.push({x:Math.random()*W,y:-20,r:Math.random()*8+4,c:colors[Math.random()*colors.length|0],vy:Math.random()*2+2,vx:(Math.random()-0.5)*2,rot:Math.random()*Math.PI,vr:(Math.random()-0.5)*0.2}) } }
  function step(){
    ctx.clearRect(0,0,W,H);
    for(const p of pieces){
      p.x+=p.vx; p.y+=p.vy; p.rot+=p.vr;
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot);
      ctx.fillStyle=p.c; ctx.fillRect(-p.r,-p.r/2,p.r*2,p.r);
      ctx.restore();
    }
    pieces = pieces.filter(p=>p.y<H+30);
    requestAnimationFrame(step);
  }
  step();
  function confettiBurst(n=120){ spawn(n); }
  document.getElementById('confettiBtn').onclick = ()=>confettiBurst(160);
</script>
</body>
</html>
